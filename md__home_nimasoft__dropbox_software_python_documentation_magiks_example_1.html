<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MAGIKS: A practical example: Simple Inverse Kinematic Solver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="/home/nimasoft/Downloads/MathJax-2.6-latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAGIKS
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">Manipulator General Inverse Kinematic Solver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">A practical example: Simple Inverse Kinematic Solver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example shows how to use MAGIKS to solve a simple IK problem in Pose Projection Scenario. In this example, we will project a single end-effector pose to the joint-space:</p>
<h3>Introduce the manipulator to MAGIKS:</h3>
<p>To run the IK solver on a manipulator, you should first introduce it to MAGIKS. A manipulator is specified by multiple levels of settings:</p>
<ul>
<li>Geometry settings by which you define the geometry through DH parameters</li>
<li>Configuration settings by which you specify joint types, joint limits and joint virtual mapping functions</li>
<li>End-effector settings</li>
<li>IK settings</li>
</ul>
<p>To run a quick and simple example, we will use pre-defined and default settings provided in MAGIKS modules. MAGIKS has a module named as <code><a class="el" href="manipulator__library_8py.html" title="Contains a function that defines geometric parameters and joint limits for a number of known manipula...">manipulator_library.py</a></code> that contains pre-defined geometry and configuration settings for some manipulators. These manipulators include: PUMA, PA10, PR2ARM, EXO and AILA. So, to use the predefined geometry and configuration settings for PA10, you should put the the following script in your code: ``` import <a class="el" href="namespacemagiks_1_1magiks__core_1_1manipulator__library.html">magiks.magiks_core.manipulator_library</a> as manlib gs = manlib.PA10_geometry_settings cs = manlib.manip_config_settings('PA10') ```</p>
<p>For end-effector and IK settings, you can select the default settings defined in modules <code><a class="el" href="endeffector_8py.html" title=": This module provides a class containing a set of reference positions and orientations in the tasksp...">endeffector.py</a></code> and <code><a class="el" href="inverse__kinematics_8py.html" title="This module provides a functor class regaring the inverse kinematic calculations of a manipulator...">inverse_kinematics.py</a></code>. You can then change some of these setting parameters:</p>
<p>``` import <a class="el" href="namespacemagiks_1_1magiks__core_1_1inverse__kinematics.html">magiks.magiks_core.inverse_kinematics</a> as iklib import <a class="el" href="namespacemagiks_1_1taskspace_1_1endeffector.html">magiks.taskspace.endeffector</a> as eflib es = eflib.Endeffector_Settings() iks = iklib.Inverse_Kinematics_Settings() ```</p>
<p>Now, you are ready to construct your IK solver model. It is an instance of class <code>Inverse_Kinematics</code>.</p>
<p>``` pa10 = iklib.Inverse_Kinematics(cs, gs, es, iks) ```</p>
<p>By default, initialy, all the joint values of each manipulator are in the middle of their mechanical feasible ranges. Current joint values are stored in property <code>q</code>. Check the initial joint values for PA10: ``` print(pa10.q) ```</p>
<p>Now, let's set a random configuration for the manipulator within the feasible joint ranges: ``` assert pa10.set_config(pa10.random_config()) ```</p>
<p>To see the joint values in the generated configuration:\ ``` print pa10.config_str()</p>
<p>q = [-170.92 11.62 -142.86 -100.87 -157.08 -59.38 24.1 ] (Joints are all in range) ``` These values are randomly generated so they may be different in your computer.</p>
<p>To get the end-effector position corresponding with this configuration, first, get the transfer matrices and then call method <code>position()</code> of the first <code>task_point</code> object: ``` H = pa10.transfer_matrices() target_p = pa10.task_point[0].position(H) print target_p</p>
<p>[-0.46763799, -0.38504628, 0.62643187] ```</p>
<p>Similarly, you can get the orientation of the end-effector by calling method <code>orientation()</code> of the first object of <code>task_frame</code>:</p>
<p>``` target_o = pa10.task_frame[0].orientation(H) print target_o.matrix()</p>
<p>[[-0.00958766, 0.58264559, -0.81266979], [-0.89192486, -0.37241008, -0.25647763], [-0.45208198, 0.72238137, 0.52324663]] ```</p>
<p>Method <code>orientation()</code> returns an object of type <code>Orientation_3D</code> You can convert the rotation into any desired convention. For example to get the orientation as unit quaternions: ``` print target_o.quaternion()</p>
<p>[ 0.53414625, 0.45814184, -0.1687683 , -0.69015295] ```</p>
<p>Since MAGIKS can handle multiple customized end-effectors, it uses a list of reference positions named as <code>task_point</code> and a list of reference orientations named as <code>task_frame</code>. Each element of this list is a reference point for position and a reference frame for the orientation which specify the system end-effector. By default, <code>task_point</code> and <code>task_frame</code> have only one element referring to the position and orientation of the last link of the chain.</p>
<p>We want to set this pose as the target for the end-effector. Then, we will change the configuration into another random value and run MAGIKS IK engine to find a feasible joint configuration for the given target. To set the current pose as target:</p>
<p>``` pa10.set_target([target_p], [target_o]) ```</p>
<p>Now, let's change the configuration into another random set of joint values: ``` assert pa10.set_config(pa10.random_config())</p>
<p>``` The new configuration is the starting point for the IK problem. To see the joint values: ``` pa10.config_str() ```</p>
<p>You can see the end-effector pose associated with this configuration: ``` pa10.task_point[0].position(pa10.transfer_matrices()) pa10.task_frame[0].orientation(pa10.transfer_matrices()).quaternion() ```</p>
<h4>Running IK in Pose Projection Scenario (PPS):</h4>
<p>To run the IK solver, we need to call function 'goto_taget()':</p>
<p>``` print pa10.goto_target() ```</p>
<p>If the result is True, you have ssuccessfully solved the IK for this target pose. You can see the solution: ``` pa10.config_str() ``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 8 2016 19:53:34 for MAGIKS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
