<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MAGIKS: pr2_kinematics.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAGIKS
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">MAnipulator General Inverse Kinematic Solver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c8fa76d8dc1b9e06ff8aeb3121608b1b.html">software</a></li><li class="navelem"><a class="el" href="dir_d167020c71189344e6919b44a946aaad.html">python</a></li><li class="navelem"><a class="el" href="dir_3830f970f0815a8c49e36c8a02e3ee1f.html">packages</a></li><li class="navelem"><a class="el" href="dir_9eefb010b4192974b660998af02d63cc.html">nima</a></li><li class="navelem"><a class="el" href="dir_d429180fa76aa48c0012ce3827ae8ee0.html">robotics</a></li><li class="navelem"><a class="el" href="dir_38eb02e495a28b8fdfcf6045e1ed9359.html">kinematics</a></li><li class="navelem"><a class="el" href="dir_dfa379782cdfd3e9c1c93d5d774328ed.html">special_geometries</a></li><li class="navelem"><a class="el" href="dir_fe9fa207b9a88ab3b236e2163f195fc7.html">pr2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">pr2_kinematics.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pr2__kinematics_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacepackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics.html">    1</a></span>&#160;<span class="comment">## @file        PR2_kinematics.py</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">#  @brief       Contains specific functions that define all geometric and kinematic parameters for PR2 robot</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">#  @author      Nima Ramezani Taghiabadi </span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">#               PhD Researcher </span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">#               Faculty of Engineering and Information Technology </span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">#               University of Technology Sydney (UTS) </span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#               Broadway, Ultimo, NSW 2007, Australia </span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">#               Phone No. :   04 5027 4611 </span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">#               Email(1)  : nima.ramezani@gmail.com </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">#               Email(2)  : Nima.RamezaniTaghiabadi@uts.edu.au </span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">#  @version     4.0 </span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">#  Last Revision    01 January 2015</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="stringliteral">Changes from version 4.0:</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="stringliteral">    1- Comments added for doxygen</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> copy</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> pr2_arm_kinematics <span class="keyword">as</span> armlib</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacepackages_1_1nima_1_1mathematics_1_1general.html">packages.nima.mathematics.general</a> <span class="keyword">as</span> gen</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacepackages_1_1nima_1_1general.html">packages.nima.general</a> <span class="keyword">as</span> pygen</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">import</span> packages.nima.mathematics.rotation <span class="keyword">as</span> rotlib</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">import</span> packages.nima.mathematics.vectors_and_matrices <span class="keyword">as</span> vecmat</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">import</span> packages.nima.mathematics.trigonometry <span class="keyword">as</span> trig</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">from</span> interval <span class="keyword">import</span> interval, inf, imath</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">import</span> numpy, math</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">import</span> packages.nima.robotics.kinematics.kinematicpy.general <span class="keyword">as</span> genkin</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">import</span> packages.nima.robotics.kinematics.joint_space.configuration <span class="keyword">as</span> configlib</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">import</span> packages.nima.robotics.kinematics.task_space.trajectory <span class="keyword">as</span> trajlib</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="namespacepackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics.html#a5467a650e231959e748636f7d073056e">   36</a></span>&#160;drc        = math.pi/180.00</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="namespacepackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics.html#a600d0f214bcd1f21f66bf6ae602cf880">   38</a></span>&#160;default_ql = drc*numpy.array([-130.0, 70.0 , -180.0, - 131.0, -180.0, -130.0, -180.0, 0.8/drc, -1000.0, -1000.0, -180.0,  -40.0,  60.0, - 44.0, -131.0, -180.0, -130.0, -180.0])</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespacepackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics.html#a3fd3f8909d7348668371dcd7d727ea9b">   39</a></span>&#160;default_qh = drc*numpy.array([  30.0, 170.0,   44.0, -   8.6,  180.0, 0.00,  180.0, 1.14/drc,  1000.0,  1000.0,  180.0,  130.0, 170.0,  180.0, -  8.6,  180.0, 0.00,  180.0])</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">## @brief Contains properties and methods managing the kinematics of the PR2 robot.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">#  This class contains all properties and methods required for forward and inverse kinematic </span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">#  computations and kinematic control of the PR2 robot in two control modes: Fixed-Base and Free-Base</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">#  In fixed-base mode, the body of the robot is assumed fixed (No navigation) and only the arms can move</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">#  while in free-base mode, the robot trunk is free to navigate. </span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">#  Each control mode can be set for one of the arms as the reference arm (Endeffector)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">#  Dual arm control (two endeffectors) is not supported in this version</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">#  PR2 has 18 degrees of freedom. The Robot will have two arms that each of them contains its associated joint values</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">#  in its \b config property.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html">   50</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html">PR2</a>(object):</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">## The Class Constructor:</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">#  @param a0 A float specifying the value of /f$ a_0 /f$ in the DH parameters of the arm    </span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">#  @param b0 A float specifying the distance of line connecting the two arms from the center of robot base  </span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">#  @param d2 A float specifying the value of /f$ d_2 /f$ in the DH parameters of the arm    </span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">#  @param d4 A float specifying the value of /f$ d_4 /f$ in the DH parameters of the arm    </span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">#  @param d7 A float specifying the length of the gripper   </span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">#  @param l0 A float specifying half of the distance between the arms   </span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">#  @param ql A numpy vector of size 18 containing the lower bounds of the arm joints    </span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">#  @param qh A numpy vector of size 18 containing the upper bounds of the arm joints</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac775ee34451fdfa742b318538164070e">   60</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac775ee34451fdfa742b318538164070e">__init__</a>(self, a0 = 0.1, b0 = 0.05, d2 = 0.4, d4 = 0.321, d7 = 0.168, l0 = 0.188, ql = default_ql, qh = default_qh):</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">assert</span> (len(ql) == 18) <span class="keywordflow">and</span> (len(qh) == 18), <span class="stringliteral">&quot;Error from &quot;</span> + __name__ + <span class="stringliteral">&quot; Constructor&quot;</span> + <span class="stringliteral">&quot;: ql and qh must be numpy vectors of size 18&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">##  A numpy vector of size 7 containing the lower bounds of the arm joints </span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">   64</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">ql</a> = ql</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">##  A numpy vector of size 7 containing the upper bounds of the arm joints </span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">   67</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">qh</a> = qh</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="comment">##  A numpy vector of size 18 containing a set of reference values for the joints. </span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">#</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">#  This parameter can be used as reference joint values for redundancy optimization. </span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">#  The redundancy will be used to set the joints as close as possible to these reference values.  </span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">#  This property is by default set as the middle of joint ranges.       </span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">   74</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">qm</a> = (qh + ql)/2</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">## A numpy vector of size 18 containing the current values of the joints. </span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">#  This property should not be manipulated by the user. Use method Set_Config() to change this property.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">#  The joints are in the following order:</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">#  q[0] : Right Arm-Shoulder Pan Joint, </span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">#  q[1] : Right Arm-Shoulder Lift Joint,</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">#  q[2] : Right Arm-Upper Arm Roll Joint, </span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">#  q[3] : Right Arm-Elbow Flex Joint,</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">#  q[4] : Right Arm-Forearm Roll Joint, </span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">#  q[5] : Right Arm-Wrist Flex Joint, </span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">#  q[6] : Right Arm-Wrist Roll Joint,</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">#  q[7] : &quot;h_ts&quot; the telescoping prismatic joint that lifts up and shifts down the trunk and arms,</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">#  q[8] : &quot;X_BO&quot; the X position of the robot base,</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">#  q[9] : &quot;Y_BO&quot; the Y position of the robot base,</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">#  q[10] : &quot;tau&quot; the rotation angle of the robot base around &quot;z&quot; axis,</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">#  q[11] to q[17] are designated for the left arm in the same order as the right arm</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">   91</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>  = (qh + ql)/2</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">## Specifies the objective function for redundancy optimization.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">#  this property should not be set by the user directly. Use method &quot;self.set_ofuncode&quot; to set this property</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">#  code legend:</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">#  1: midrange distance</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">#  0: distance from current configuration</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">   98</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">ofuncode</a> = 1</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">  100</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a> = numpy.zeros(11)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> [0, 1, 2, 3, 5, 7]:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a>[i] = 1.0/((qh[i] - ql[i])**2)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">## An instance of class \ref packages.nima.robotics.kinematics.special_geometries.pr2.pr2_arm_kinematics.PR2_ARM() </span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">#  containing the kinematic properties and methods of the right arm</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a716a81bb9304c0eabf0523d510a17d0d">  106</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a716a81bb9304c0eabf0523d510a17d0d">rarm</a> = armlib.PR2_ARM(a0 = a0, d2 = d2, d4 = d4, ql = ql[0:7]  , qh = qh[0:7]  , W = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a>[0:7])</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">## An instance of class \ref packages.nima.robotics.kinematics.special_geometries.pr2.pr2_arm_kinematics.PR2_ARM() </span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">#  containing the kinematic properties and methods of the left arm</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3bc992460b7cddce2ba254e7679b6d25">  110</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3bc992460b7cddce2ba254e7679b6d25">larm</a> = armlib.PR2_ARM(a0 = a0, d2 = d2, d4 = d4, ql = ql[11:18], qh = qh[11:18], W = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a>[0:7])</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">  112</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">d7</a> = d7</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">  113</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">b0</a> = b0</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">  114</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a> = l0</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">  115</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">p_EFR_WR</a> = numpy.array([0.0, 0.0, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">d7</a>])</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">  116</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">p_EFL_WL</a> = numpy.array([0.0, 0.0, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">d7</a>])</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment"># sets all angles to midrange by default</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#af6750e95dc16cc3bf51069422e8ef1dc">set_config</a>(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">qm</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab11c51b7742a144ec8f0089eb023613d">  121</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab11c51b7742a144ec8f0089eb023613d">control_mode</a>          = <span class="stringliteral">&quot;fixed_base&quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">## A boolean specifying the reference arm for the endeffector.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">#  If True, the endeeffector is the end of left arm gripper, False if right arm </span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">  125</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>        = <span class="keyword">False</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">## A numpy vector of size 3 representing the desired position of the Endeffector.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">#  Recommended to be used as a read only property. Use function set_target() to change the value of this property</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">  129</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">xd</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">## A \f$ 3 \times 3 \f$ rotation matrix specifying the desired endeffector orientation for the IK problem. </span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment"># Recommended not to be set directly. Always use function set_target() to change this property. </span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">  133</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">Rd</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">## Use this function to check if a given value for specific joint is in its feasibility range</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">#  @param i An integer between 0 to 17 specifying the joint number to be checked</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">#  @param qi A float parameter specifying the value for the i-th joint</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">#  @return A boolean: True if the given joint angle qi is in feasible range for the i-th joint (within the specified joint limits for that joint)</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">  139</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">joint_in_range</a>(self,i, qi):</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="stringliteral">        Example</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">if</span> i <span class="keywordflow">in</span> range(0, 7):</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">return</span> self.rarm.config.joint_in_range(i, qi)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">elif</span> i <span class="keywordflow">in</span> range(11, 18):</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">return</span> self.larm.config.joint_in_range(i - 11, qi)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">if</span> i == 10: <span class="comment"># if base rotation angle is selected, it should be taken into the standard range</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                qi = trig.angle_standard_range(qi) </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> abs(qi - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">ql</a>[i]) &lt; gen.epsilon:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                qi = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">ql</a>[i]</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">if</span> abs(qi - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">qh</a>[i]) &lt; gen.epsilon:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                qi = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">qh</a>[i]</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">return</span> ((qi &lt;= self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">qh</a>[i]) <span class="keywordflow">and</span> (qi &gt;= self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">ql</a>[i]))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">## Use this function to check if all values of the given joint vector are in their feasibility range</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">#  @param qd A numpy vector of size 18 containing the values to be checked</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">#  @return A boolean: If The given joints &quot;qd&quot; are out of the range specified by properties: ql and qh, returns False, otherwise returns True</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a56210030456683844085921f1f3ada2d">  161</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a56210030456683844085921f1f3ada2d">all_joints_in_range</a>(self, qd):</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral">        Example</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">#Are all the arm given joints in range ?</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        flag = self.rarm.config.all_joints_in_range(qd[0:7])  </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        flag = flag <span class="keywordflow">and</span> self.larm.config.all_joints_in_range(qd[11:18])  </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(7, 11):</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            flag = flag <span class="keywordflow">and</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">joint_in_range</a>(i, qd[i])</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span> flag</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">## protected</span></div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aba032e34d43f0b23c919cbf68c403406">  174</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aba032e34d43f0b23c919cbf68c403406">set_ofuncode</a>(self, new_ofuncode):</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> (new_ofuncode &gt; 2) <span class="keywordflow">or</span> (new_ofuncode &lt; 0):</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;set_ofuncode_error: The given objective function code is not supported&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">ofuncode</a>               = new_ofuncode</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">  181</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">ofun_computed</a>          = <span class="keyword">False</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a669b7e80bd402c331bd8e8bbd362915b">  182</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a669b7e80bd402c331bd8e8bbd362915b">div_theta_ofun_updated</a> = <span class="keyword">False</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae031f9dbc634ca3d2b12cc77e9469f3d">  183</a></span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae031f9dbc634ca3d2b12cc77e9469f3d">div_phi_ofun_updated</a>   = <span class="keyword">False</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">## Use this function to find the current value of the objective function</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">#  @return An instance of type float containing the value of the objective function</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#affe246b1b04676ed6498c559bcb007b2">  188</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#affe246b1b04676ed6498c559bcb007b2">objective_function</a>(self):</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">ofun_computed</a>:</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0e41a0fa618f59d8b691a2b320fb304e">  190</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0e41a0fa618f59d8b691a2b320fb304e">ofun</a> = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9524ba54025f718366f4399ce24c65ee">objective_function_for</a>(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[0:11])</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">ofun_computed</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0e41a0fa618f59d8b691a2b320fb304e">ofun</a></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">## Sets the robot configuration to the desired given joint values</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">#  @param qd A numpy array of 7 elements containing the values of the given joints</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">#  @return A boolean: True  if the given configuration is successfully set, False if the given configuration is not successfully set. </span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">#         (If False is returned, the configuration will not chenge)</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#af6750e95dc16cc3bf51069422e8ef1dc">  198</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#af6750e95dc16cc3bf51069422e8ef1dc">set_config</a>(self, qd):</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> len(qd) == 18: <span class="comment">#If the class is initialized in &quot;dual_arm&quot; mode, this number should be 18</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;set_config error: Number of input elements must be 18 in dual arm mode&quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a56210030456683844085921f1f3ada2d">all_joints_in_range</a>(qd) <span class="keywordflow">and</span> self.rarm.set_config(qd[0:7]) <span class="keywordflow">and</span> self.larm.set_config(qd[11:18]):</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[0:7]   = trig.angles_standard_range(qd[0:7])</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[7:10]  = qd[7:10]</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[10:18] = trig.angles_standard_range(qd[10:18])</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaa53ca0b650dfd85c4f59fa156f7a2cc">  209</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaa53ca0b650dfd85c4f59fa156f7a2cc">C</a> = math.cos(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[10])</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad53aeb78abc83a52ab8982f5c82a3d5b">  210</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a> = math.sin(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[10])</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">  212</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a>    = numpy.array([qd[8]   ,  qd[9],0.0])</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa825a3134f491c393b9dbccfc4bfad7d">  213</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa825a3134f491c393b9dbccfc4bfad7d">p_BL_BO</a> = numpy.array([self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">b0</a>     ,  self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a>, qd[7]])        </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">  214</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">p_BR_BO</a> = numpy.array([self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">b0</a>     ,- self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a>, qd[7]])     </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">  216</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">R_B</a>     = numpy.array([[  self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaa53ca0b650dfd85c4f59fa156f7a2cc">C</a>, - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>, 0.0 ], </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                        [  self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>,   self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaa53ca0b650dfd85c4f59fa156f7a2cc">C</a>, 0.0 ],</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                        [  0.0          ,  0.0         , 1.0]]) </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a27ee7bd06926f177ef4e52611b2c793a">  220</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a27ee7bd06926f177ef4e52611b2c793a">rarm_endeff_position_updated</a>    = <span class="keyword">False</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a72978980acd54f9aaf100f758660a136">  221</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a72978980acd54f9aaf100f758660a136">larm_endeff_position_updated</a>    = <span class="keyword">False</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1b5db87f13780dbde7f33c14088c9e20">  222</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1b5db87f13780dbde7f33c14088c9e20">rarm_endeff_orientation_updated</a> = <span class="keyword">False</span></div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a32304474a27c4fedb91eb6fd587b223b">  223</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a32304474a27c4fedb91eb6fd587b223b">larm_endeff_orientation_updated</a> = <span class="keyword">False</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a11b97e21a0e373a7a382cc567e5abd48">  224</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a11b97e21a0e373a7a382cc567e5abd48">in_target_updated</a>               = <span class="keyword">False</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a96f17daad7ed7b8af164d2f7c6e1c5e5">  225</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a96f17daad7ed7b8af164d2f7c6e1c5e5">redun_jacob_updated</a>             = <span class="keyword">False</span></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad12af75571dfe9147970898e7d9f14a7">  226</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad12af75571dfe9147970898e7d9f14a7">redun_jacob_ext_updated</a>         = <span class="keyword">False</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae012e78b3bb050a10b5a615ea657d71b">  227</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae012e78b3bb050a10b5a615ea657d71b">geometric_jacob_updated</a>         = <span class="keyword">False</span></div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7038bdbba8f7357aa999358ac31578ee">  228</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7038bdbba8f7357aa999358ac31578ee">div_theta_err_updated</a>           = <span class="keyword">False</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a669b7e80bd402c331bd8e8bbd362915b">div_theta_ofun_updated</a>          = <span class="keyword">False</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae031f9dbc634ca3d2b12cc77e9469f3d">div_phi_ofun_updated</a>            = <span class="keyword">False</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">ofun_computed</a>                   = <span class="keyword">False</span></div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ca6e8e839c342f1460f6841434ec363">  232</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ca6e8e839c342f1460f6841434ec363">redundant_parameters_updated</a>    = <span class="keyword">False</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a71a47f50021e36e8dde0aed7194afbd6">  233</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a71a47f50021e36e8dde0aed7194afbd6">in_target_evaluated</a>             = <span class="keyword">False</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Error from PR2().set_config(): Given joints are not in their feasible range&quot;</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Lower Limit  :&quot;</span>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">ql</a></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Upper Limit  :&quot;</span>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">qh</a></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Desired Value:&quot;</span>, qd</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">## Sets the endeffector target to a desired position and orientation.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment"># @param target_position    A numpy array of 3 elements specifying the desired endeffector position</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment"># @param target_orientation A \f$ 3 \times 3 \f$ numpy rotation matrix representing the desired endeffector orientation</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment"># @return A boolean: True  if the given pose is successfully set, False if the given pose is not successfully set because of an error</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">#        (If False is returned, properties self.xd and self.RD will not chenge)</span></div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab9adddbab17cda8cfa88101a8c47ad0c">  248</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab9adddbab17cda8cfa88101a8c47ad0c">set_target</a>(self, target_position, target_orientation):</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">        sets the endeffector target to the given position and orientation</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">        variables self.xd and self.Rd should not be manipulated by the user. Always use this function</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span>    </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">xd</a> = target_position</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">Rd</a> = target_orientation</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment"># Specify the relative target for the right arm</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">        print &quot;in ST: p_BR_BO = &quot;, self.p_BR_BO</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">        print &quot;rel_ef_pos[2]  = &quot;, -self.p_BR_BO[2] + target_position[2] - target_orientation[2,2]*self.d7</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="stringliteral">        relative_endeffector_position    = - self.p_BR_BO + numpy.dot(self.R_B.T,target_position - self.p_BO - numpy.dot(target_orientation,self.p_EFR_WR))</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">        print &quot;rel_ef_pos[2]  = &quot;, relative_endeffector_position[2]</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        relative_endeffector_position    = - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">p_BR_BO</a> + numpy.dot(self.R_B.T,target_position - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a> - numpy.dot(target_orientation,self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">p_EFR_WR</a>))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        relative_endeffector_orientation = numpy.dot(self.R_B.T, target_orientation)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">#set the relative pose for the arm</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        self.rarm.set_target(relative_endeffector_position,relative_endeffector_orientation)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a71a47f50021e36e8dde0aed7194afbd6">in_target_evaluated</a>           = <span class="keyword">False</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">##  Finds all the feasible solutions of the Inverse Kinematic problem for given redundant parameter vector \f$ \phi \f$.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">#   @param phi Is a numpy vector of five elements containing the values of five redundant parameters in free-base mode.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">#   The values of phi specify the following parameters: \n</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">#   phi[0] : The first joint angle q[0] (Shoulder-Pan joint angle) \n</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">#   phi[1] : The \b r cylindrical coordinate of the wrist (wrist joint center) position</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">#   w.r.t. the arm base (shoulder-pan joint center) in torso coordinate system:</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">#   \f[</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">#   r = p_x^2 + p_y^2 </span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">#   \f] where \f$ p_x \f$ and \f$ p_y \f$ are the \b x and \b y cartesian coordinates of the wrist position </span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">#   w.r.t. the arm base in torso coordinate system. \n</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">#   phi[2] : \f$ p_z \f$ or the \b z cartesian coordinate of the wrist position </span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">#    w.r.t. the arm base in torso coordinate system. \n</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">#   phi[3] : The \b \f$ \psi \f$ cylindrical coordinate of the wrist (wrist joint center) position w.r.t. the arm base in torso CS:</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">#   \f[</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">#   \psi = \arctan( \frac {p_x} {p_y}) </span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">#   \f] (\f$ p_x \f$ and \f$ p_y \f$ can be determined from phi[1] and phi[3]) \n</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">#   phi[4] : \b \f$ \tau \f$ or the rotation angle of the trunc base around z axis</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">#   @return An array of numpy vectors. Each numpy vector is a feasible solution and contains 11 elements. </span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">#   The first 7 elements are the arm joints(left arm if property larm_reference is True and right arm, otherwise) </span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">#   and the next 4 elements contain the values of non-arm degrees of freedom (q[7] to q[10])</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">#   This function only returns the feasible IK solutions but does NOT set the configuration so the joint values do not change</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">#   The output will be \b None if given redundant parameters are invalid or out of feasible range.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a31e23eae18e9bde6d59aa3298ebd3667">  294</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a31e23eae18e9bde6d59aa3298ebd3667">all_IK_solutions</a>(self, phi):  </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>:</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            jn     = 0</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            arm    = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a716a81bb9304c0eabf0523d510a17d0d">rarm</a></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            l0     = - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            p_EF_W = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">p_EFR_WR</a></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            jn     = 7</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            arm    = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3bc992460b7cddce2ba254e7679b6d25">larm</a></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            l0     = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            p_EF_W = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">p_EFL_WL</a></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">joint_in_range</a>(jn, phi[0]):</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Error from &quot;</span>+__name__+func_name+<span class="stringliteral">&quot;: The first given redundant parameter (phi[0]) is out of feasible range&quot;</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">joint_in_range</a>(10, phi[4]):</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Error from &quot;</span>+__name__+func_name+<span class="stringliteral">&quot;: The fifth given redundant parameter (phi[4], tau or trunc rotation angle) is out of feasible range&quot;</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment"># Todo: check later for phi[2] </span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">#keep the current target of the arm</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        save_arm_target_position    = copy.copy(arm.xd)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        save_arm_target_orientation = copy.copy(arm.Rd)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment"># Set parameters based on the given redundancy vector phi:</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        r   = phi[1]</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        pz  = phi[2]</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        psi = phi[3]</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        tau = phi[4]</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment"># Calculate the relative endeffector position:</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        px = r*math.sin(psi)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        py = r*math.cos(psi)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        p_W_B = numpy.array([px, py, pz])</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="comment"># Calculate the relative endeffector orientation:</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        R_B     = rotlib.rot_z(tau)  <span class="comment"># orientation of robot base</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        R_W     = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">Rd</a></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        p_EF    = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">xd</a>   </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        R_W_B  = numpy.dot(R_B.T, R_W)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">#set the new target for the arm associated with the given phi</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        arm.set_target(p_W_B, R_W_B)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">#Find all the solutions for the arm IK</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        solution_set = []</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        arm_solution_set = arm.all_IK_solutions(phi[0])</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> len(arm_solution_set) == 0:</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;IK Error: No solution for the arm for given phi&quot;</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment"># Calculate the telescopic prismatic joint:</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            h_ts  = - pz + self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">xd</a>[2] - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">Rd</a>[2,2]*self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">d7</a></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">#calculate the base position:</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            p_B_BO = numpy.array([self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">b0</a> , l0, h_ts])     </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            p_BO    = p_EF - numpy.dot(R_B,(p_B_BO + p_W_B)) - numpy.dot(R_W, p_EF_W)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keyword">assert</span> gen.equal(p_BO[2], 0.0) <span class="comment"># z coordinate of the base must be zero</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="comment"># Now we have all the joints(all 11 degrees of freedom) insert extra DOFs to the arm solution set</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">for</span> arm_solution <span class="keywordflow">in</span> arm_solution_set:</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                solution = numpy.zeros(11)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                solution[0:7] = arm_solution</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                solution[7]   = h_ts     <span class="comment"># append q[7] = h_ts</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                solution[8]   = p_BO[0]  <span class="comment"># append q[8] = X_BO</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                solution[9]   = p_BO[1]  <span class="comment"># append q[9] = Y_BO</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                solution[10]  = tau      <span class="comment"># append q[10] = tau</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                solution_set.append(solution) <span class="comment"># append the solution to the solution set</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="comment">#return back the previous target of the arm</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        arm.set_target(save_arm_target_position, save_arm_target_orientation)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> solution_set</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">##  Use this function to get the value of the objective function for a given configuration \b \a q</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">#   Why has this function been written?</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">#   Sometimes you want to find the value of the objective function for a configuration but </span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">#   you don&#39;t want to set that configuration (you don&#39;t want to take the manipulator to that configuration)</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">#   In this case, you can not use function &quot;self.objective_function()&quot; which gives the value of the objective </span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">#   function for the current configuration of the robot.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">#   @param q A numpy vector of size 11 containing the joint values of the reference arm followed by the four non-arm joints</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">#   @return A float indicating the value of the objective function for the given q</span></div>
<div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9524ba54025f718366f4399ce24c65ee">  389</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9524ba54025f718366f4399ce24c65ee">objective_function_for</a>(self, q):    </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>:</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            qc = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[0:11]</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            qm = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">qm</a>[0:11]</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            qc = numpy.append(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[11:18] , self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[7:11])</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            qm = numpy.append(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">qm</a>[11:18], self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">qm</a>[7:11])</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">ofuncode</a> == 0:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            delta = trig.angles_standard_range(q - qc)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            ofun = numpy.dot(delta.T, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a>*delta)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">ofuncode</a> == 1:</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            delta = trig.angles_standard_range(q - qm)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            ofun = numpy.dot(delta.T, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">W</a>*delta)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keyword">assert</span> <span class="keyword">False</span>, <span class="stringliteral">&quot;Error from &quot;</span>+__name__ + func_name + <span class="stringliteral">&quot;: Value &quot;</span>+str(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">ofuncode</a>)+<span class="stringliteral">&quot; for argument ofuncode is not supported&quot;</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">return</span> ofun</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">## Finds the solution of the Inverse Kinematic problem for given redundant parameter vector \f$ phi \f$ in free-base mode.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">#  In case of redundant solutions, the one corresponding to the lowest objective function is selected.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">#  Class property ofuncode specifies the objective function. legend for ofuncode:</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">#        \li ofuncode = 0 (Default) the solution closest to current joint angles will be selected </span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">#        \li ofuncode = 1 the solution corresponding to the lowest midrange distance is selected</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">#  This function does NOT set the configuration so the joints do not change</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">#  @param phi A numpy vector of size 5 containing the values of the five \em redundant parameters</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">#  @return A numpy vector of size 5 containing the IK solution corresponding to the given redundant parameters and the lowest value of the objective function. </span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">#  The first 7 elements contain the joints of the reference arm and the last four, are the values of the non-arm joints.    </span></div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3a50c2ca9418cac811b2cca34087a40b">  417</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3a50c2ca9418cac811b2cca34087a40b">IK_config</a>(self, phi):    </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        solution_set = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a31e23eae18e9bde6d59aa3298ebd3667">all_IK_solutions</a>(phi)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span> len(solution_set) == 0:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;IK_config error: No solution found within the feasible joint ranges&quot;</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        ofun_min = 1000</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(solution_set)):</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            solution = solution_set[i]</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            ofun = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9524ba54025f718366f4399ce24c65ee">objective_function_for</a>(solution)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">if</span> ofun &lt; ofun_min:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                ofun_min = ofun</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                i_min = i</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">return</span> solution_set[i_min]</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">## Use this function to get the current position of the right gripper (Arm Endeffector)  w.r.t the arm base.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the position of the right arm gripper w.r.t. the torso shoulder pan joint center.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a680f37ca8a46fccd77fde121859e3bb3">  439</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a680f37ca8a46fccd77fde121859e3bb3">pos_rarm_grip_wrt_tor_shpan</a>(self):</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        R_WR_B   = self.rarm.wrist_orientation()</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        p_WR_BR  = self.rarm.wrist_position()</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        p_EFR_BR = p_WR_BR + numpy.dot(R_WR_B, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">p_EFR_WR</a>)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        return(p_EFR_BR)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">## Use this function to get the current position of the left gripper (Arm Endeffector) w.r.t the arm base.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the position of the left arm gripper (endeffector position) </span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">#          w.r.t. the torso shoulder pan joint center.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a81497b6134f7053a7a9e78daf399ff20">  449</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a81497b6134f7053a7a9e78daf399ff20">pos_larm_grip_wrt_tor_shpan</a>(self):</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        R_WL_B   = self.larm.wrist_orientation()</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        p_WL_BL  = self.larm.wrist_position()</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        p_EFL_BL = p_WL_BL + numpy.dot(R_WL_B, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">p_EFL_WL</a>)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        return(p_EFL_BL)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">## Use this function to get the current position of the left gripper (Arm Endeffector) w.r.t the torso.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the left arm gripper position vector </span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">#          (endeffector position) w.r.t. the torso at the origin </span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">#          \b Note: The torso origin is at the floor footprint (projection) of the middle point </span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">#          between the two shoulder pan joint centers.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4d18f7b7fbdb15366c73a4313eb70bd3">  461</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4d18f7b7fbdb15366c73a4313eb70bd3">pos_larm_grip_wrt_tor</a>(self):</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        p_EFL_BL = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a81497b6134f7053a7a9e78daf399ff20">pos_larm_grip_wrt_tor_shpan</a>()</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        p_EFL_BO = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa825a3134f491c393b9dbccfc4bfad7d">p_BL_BO</a> + p_EFL_BL</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        return(p_EFL_BO)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">## Use this function to get the current position of the right gripper (Arm Endeffector) w.r.t the torso.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the right arm gripper position vector </span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">#          (endeffector position) w.r.t. the torso at the origin </span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">#          \b Note: The torso origin is at the floor footprint (projection) of the middle point </span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">#          between the two shoulder pan joint centers.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a5e9d9349f1b00b8cd62ead275e5f100d">  472</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a5e9d9349f1b00b8cd62ead275e5f100d">pos_rarm_grip_wrt_tor</a>(self):</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        p_EFR_BR = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a680f37ca8a46fccd77fde121859e3bb3">pos_rarm_grip_wrt_tor_shpan</a>()</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        p_EFR_BO = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">p_BR_BO</a> + p_EFR_BR</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        return(p_EFR_BO)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">## Use this function to get the current global position of the right gripper (Arm Endeffector).</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the global cartesian coordiantes of the end of right arm gripper.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8800f1a13b5842e83b288bfbf5565117">  480</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8800f1a13b5842e83b288bfbf5565117">pos_rarm_grip</a>(self):</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        p_EFR_BO = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a5e9d9349f1b00b8cd62ead275e5f100d">pos_rarm_grip_wrt_tor</a>()</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        return(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a> + p_EFR_BO)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">## Use this function to get the current global position of the left gripper (Arm Endeffector).</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">#  @param None</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">#  @return A numpy vector of 3 elements containing the global cartesian coordiantes of the end of left arm gripper.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a402ed898f0c84dca5c3b52359e6f8f86">  487</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a402ed898f0c84dca5c3b52359e6f8f86">pos_larm_grip</a>(self):</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        p_EFL_BO = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4d18f7b7fbdb15366c73a4313eb70bd3">pos_larm_grip_wrt_tor</a>()</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        return(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a> + p_EFL_BO)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a63916366e296264cef4126b2935c8b0a">  491</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a63916366e296264cef4126b2935c8b0a">rarm_endeffector_position</a>(self):        </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="stringliteral">        Returns the cartesian coordiantes of the end of gripper as the endeffector of the right arm.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span>    </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a27ee7bd06926f177ef4e52611b2c793a">rarm_endeff_position_updated</a>:</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">  497</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">R_WR</a>    = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad616425e2729a60bb8a261879c736235">rarm_endeffector_orientation</a>()</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a869ffe20032bd5888e012020051530b2">  498</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a869ffe20032bd5888e012020051530b2">p_WR_BR</a> = self.rarm.wrist_position()</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86324d3da2ccd46823b05cd5b5d9b4a9">  500</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86324d3da2ccd46823b05cd5b5d9b4a9">p_EFR</a>   = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a> + numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">R_B</a>,(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">p_BR_BO</a> + self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a869ffe20032bd5888e012020051530b2">p_WR_BR</a>)) + numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">R_WR</a>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">p_EFR_WR</a>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a27ee7bd06926f177ef4e52611b2c793a">rarm_endeff_position_updated</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">return</span> copy.copy(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86324d3da2ccd46823b05cd5b5d9b4a9">p_EFR</a>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;               </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a849538b68e3a761a68bb8e7d950ee0af">  505</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a849538b68e3a761a68bb8e7d950ee0af">larm_endeffector_position</a>(self):        </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="stringliteral">        Returns the cartesian coordiantes of the end of gripper as the endeffector of the left arm.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span>    </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a72978980acd54f9aaf100f758660a136">larm_endeff_position_updated</a>:</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">  511</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">R_WL</a>    = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0055ff5d5ece1ab849f786c89dd56c3c">larm_endeffector_orientation</a>()</div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#abfe0b1d5a3feda84df5608586bfcca71">  512</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#abfe0b1d5a3feda84df5608586bfcca71">p_WL_BL</a> = self.larm.wrist_position()</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ee70cf875c0b19cc72395a999dcc389">  514</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ee70cf875c0b19cc72395a999dcc389">p_EFL</a>   = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">p_BO</a> + numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">R_B</a>,(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa825a3134f491c393b9dbccfc4bfad7d">p_BL_BO</a> + self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#abfe0b1d5a3feda84df5608586bfcca71">p_WL_BL</a>)) + numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">R_WL</a>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">p_EFL_WL</a>)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a72978980acd54f9aaf100f758660a136">larm_endeff_position_updated</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">return</span> copy.copy(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ee70cf875c0b19cc72395a999dcc389">p_EFL</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a21ebb59ff6f547d967d436a97b671fb2">  519</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a21ebb59ff6f547d967d436a97b671fb2">endeffector_position</a>(self):</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a849538b68e3a761a68bb8e7d950ee0af">larm_endeffector_position</a>()</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a63916366e296264cef4126b2935c8b0a">rarm_endeffector_position</a>()</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad616425e2729a60bb8a261879c736235">  525</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad616425e2729a60bb8a261879c736235">rarm_endeffector_orientation</a>(self):        </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">        Returns the cartesian coordiantes of the right arm gripper as the endeffector frame.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span>    </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1b5db87f13780dbde7f33c14088c9e20">rarm_endeff_orientation_updated</a>:</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaff9d3488158f8fb0eb1e1e73c73e8c2">  531</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaff9d3488158f8fb0eb1e1e73c73e8c2">R_WR_B</a>  = self.rarm.wrist_orientation()</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">R_WR</a>    = numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">R_B</a>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaff9d3488158f8fb0eb1e1e73c73e8c2">R_WR_B</a>)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1b5db87f13780dbde7f33c14088c9e20">rarm_endeff_orientation_updated</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> copy.copy(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">R_WR</a>)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0055ff5d5ece1ab849f786c89dd56c3c">  537</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0055ff5d5ece1ab849f786c89dd56c3c">larm_endeffector_orientation</a>(self):        </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="stringliteral">        Returns the cartesian coordiantes of the left arm gripper as the endeffector frame.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span>    </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a32304474a27c4fedb91eb6fd587b223b">larm_endeff_orientation_updated</a>:</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a18a1fb96589c0d78f99c2d30b27aa3d3">  543</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a18a1fb96589c0d78f99c2d30b27aa3d3">R_WL_B</a>  = self.larm.wrist_orientation()</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">R_WL</a>    = numpy.dot(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">R_B</a>, self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a18a1fb96589c0d78f99c2d30b27aa3d3">R_WL_B</a>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a32304474a27c4fedb91eb6fd587b223b">larm_endeff_orientation_updated</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">return</span> copy.copy(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">R_WL</a>)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6e5d1ccc5f119afc56ad526231f6ccf7">  549</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6e5d1ccc5f119afc56ad526231f6ccf7">endeffector_orientation</a>(self):</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0055ff5d5ece1ab849f786c89dd56c3c">larm_endeffector_orientation</a>()</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad616425e2729a60bb8a261879c736235">rarm_endeffector_orientation</a>()</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab07aad3707ab81430a546fb66f5cf6a2">  555</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab07aad3707ab81430a546fb66f5cf6a2">div_theta_err</a>(self):</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="stringliteral">        Returns the divergence of the vector of kinematic constraints &quot;e&quot; in respect with the joints</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">        It is a 9*9 matrix</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">        e_ij = rond e_i / rond q_j  (for i,j = 0,..,8)   </span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">larm_reference</a>:</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            arm = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a716a81bb9304c0eabf0523d510a17d0d">rarm</a></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            l0  = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">l0</a></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            arm = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3bc992460b7cddce2ba254e7679b6d25">larm</a></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            l0  = - slef.l0</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7038bdbba8f7357aa999358ac31578ee">div_theta_err_updated</a>:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">  570</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a> = numpy.zeros((9,9))</div>
<div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">  571</a></span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a> = numpy.zeros((9,5))</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            phi = numpy.zeros(5)                </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            [s0, s1, s2, s3, s4, s5, s6] = arm.config.s</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            [c0, c1, c2, c3, c4, c5, c6] = arm.config.c</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            tau = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">q</a>[10]</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            C5  = math.cos(tau)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            S5  = math.sin(tau)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            [s10]         = arm.config.s1_mult1</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            [s20,s21, s22, s210]  = arm.config.s2_mult1</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            [s30, s31, s32, s310, s320, s321, s322, s33,s3210] = arm.config.s3_mult1</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            [c0s0,c0s1,c0s2,c0s10,c0s20,c0s21,c0s30,c0s31,c0s32,c0s321] = arm.config.c0_mult</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            [c10, c1s0, c1s1, c1s2, c1s3, c1s10, c1s20,c1s30,c1s32,c1s320] = arm.config.c1_mult</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            [c20,c21,c22,c210,c2s0,c2s1,c2s2,c2s3,c2s10,c2s20,c2s30,c2s31,c2s310,c21s30,c20s31] = arm.config.c2_mult</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            [c30,c31,c32,c33,c3s0,c3s1,c3s2,c3s3,c3s10,c3s20,c3s21,c3s30,c310,c320,c321,c3210,c32s0,c32s10] = arm.config.c3_mult</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            [c21s0,c31s0,c321s0]  = arm.config.s0_mult</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            [c10s1,c20s1,c30s1, c32s1,c320s1] = arm.config.s1_mult2</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            [c10s2,c20s2,c30s2, c32s2,c310s2]  = arm.config.s2_mult2</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            [c10s3, c20s3, c30s3, c21s3, c210s3,s332]  = arm.config.s3_mult2</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            [c10s32, c31s20, s54] = arm.config.cs_mult</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            [c54, c5s4, c5s5] = arm.config.c5_mult</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            [s64, s65, c4s6, c5s6, c54s6, s654] = arm.config.s6_mult</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            [c64, c65, c6s4, c6s5, c654, C6s54] = arm.config.c6_mult</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            phi = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6234c468f2e58000d3359828f267dd14">redundant_parameters</a>()</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            Rd = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6e5d1ccc5f119afc56ad526231f6ccf7">endeffector_orientation</a>()</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            xd = self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a21ebb59ff6f547d967d436a97b671fb2">endeffector_position</a>()</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            [Q, Q2, d42, d44, a00, d22_plus_d44, foura00d44, alpha] = arm.additional_dims</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            r2   = phi[1]**2</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            rho2 = r2 + phi[2]**2</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            R2   = rho2 - arm.l**2</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            a0   = arm.a0</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            d2   = arm.d2</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            d4   = arm.d4</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            a = Rd[:,2]</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            n = Rd[:,0]</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            b = xd - self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">d7</a>*a</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            ax_c5_m_ay_s5 = a[0]*C5 - a[1]*S5</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            ax_s5_p_ay_c5 = a[0]*S5 + a[1]*C5</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            nx_c5_m_ny_s5 = n[0]*C5 - n[1]*S5</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            nx_s5_p_ny_c5 = n[0]*S5 + n[1]*C5</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            C14           = math.cos(phi[0] + phi[3])</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            S14           = math.sin(phi[0] + phi[3])</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            C45           = math.cos(phi[4] + phi[3])</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            S45           = math.sin(phi[4] + phi[3])</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[0,2] = - 2*d42*s3</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[2,1] =   arm.d4*s321</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[3,4] =   -s5</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[4,3] =   c4*s5</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[4,4] =   c5*s4</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[5,4] =   c65</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[5,5] = - s65</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[8,8] =   1.0</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[2,6] =   1.0</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[1,1] = 2*a00*d44*s33*c2s2</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[1,2] = 2*a0*d42*s3*phi[1]*S14 + (a0**2)*(d4**2)*(s2**2)*(2*c3*s3)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="comment"># Alternative:  self.E[1,2] = - s3*d42*(2*c3*d42 - R2) + 2*c3s3*(a0**2)*(d4**2)*(s2**2) </span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[6,6] = 1.0</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[6,2] = 1.0</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[2,0] = - arm.d2*s1 - arm.d4*(c3s1 + c21s3) </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[2,2] =  - arm.d4*(c1s3 + c32s1) </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[3,0] =  ax_c5_m_ay_s5*(c20s31 - c310) + ax_s5_p_ay_c5*(c2s310 - c31s0) + a[2]*(c3s1 + c21s3) </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[3,1] =  ax_c5_m_ay_s5*(c2s30 + c10s32) - ax_s5_p_ay_c5*(c20s3 - c1s320) - a[2]*s321 </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[3,2] =  ax_c5_m_ay_s5*(c3s20 - c3210 + c0s31) - ax_s5_p_ay_c5*(c30s2 + c321s0 - s310) + a[2]*(c1s3 + c32s1)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[4,0] =  - ax_c5_m_ay_s5*c0s21 - ax_s5_p_ay_c5*s210 - a[2]*c1s2</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[4,1] =  ax_c5_m_ay_s5*(c210 -s20)  + ax_s5_p_ay_c5*(c0s2 + c21s0) - a[2]*c2s1</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                             </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[5,0] =  nx_c5_m_ny_s5*(- c20s31 + c310) + nx_s5_p_ny_c5*(- c2s310 + c31s0) - n[2]*(c3s1 + c21s3) </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[5,1] =  - nx_c5_m_ny_s5*(c2s30 + c10s32) + nx_s5_p_ny_c5*(c20s3 - c1s320) + n[2]*s321     </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[5,2] =    nx_c5_m_ny_s5*(- c3s20 + c3210 - c0s31) + nx_s5_p_ny_c5*(c30s2 + c321s0 - s310) - n[2]*(c1s3 + c32s1) </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[7,7] =  1.0</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>[8,8] =  1.0</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[0,2] = -2*phi[2]</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[7,1] =  S45</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[8,1] =  C45</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[0,0] =   2*arm.a0*phi[1]*C14 </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[0,1] =   2*arm.a0*S14 - 2*phi[1]</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[0,3] =   2*arm.a0*phi[1]*C14 </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[1,1] =   2*phi[1]*arm.a0*(phi[1]*S14 - arm.a0)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[1,2] =   2*phi[1]*arm.a0*S14*phi[2]</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[3,0] =   ax_c5_m_ay_s5 *(c0s32 + c21s30 + c3s10) + ax_s5_p_ay_c5*(s320 - c210s3 - c30s1) </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[3,4] =   - ax_s5_p_ay_c5*(s320 - c210*s3 - c30*s1) - ax_c5_m_ay_s5*(c0*s32 + c21*s30 + c3s10)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[4,0] =   ax_c5_m_ay_s5*(c20 - c1s20) + ax_s5_p_ay_c5*(c2s0 + c10s2)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[4,4] = - ax_c5_m_ay_s5*(c20 - c1s20) - ax_s5_p_ay_c5*(c2s0 + c10s2)  </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[5,0] = - nx_c5_m_ny_s5*(c0s32 + c21s30 + c3s10) + nx_s5_p_ny_c5*(-s320 + c210s3 + c30s1) </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[5,4] = + nx_c5_m_ny_s5*(c0s32 + c21s30 + c3s10) - nx_s5_p_ny_c5*(-s320 + c210s3 + c30s1)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[7,4] =   phi[1]*C45 + C5*l0</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[8,4] =   - phi[1]*S45 - S5*l0</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[7,3] =   phi[1]*C45</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">F</a>[8,3] =   - phi[1]*S45</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7038bdbba8f7357aa999358ac31578ee">div_theta_err_updated</a> = <span class="keyword">True</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">return</span> copy.copy(self.<a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">E</a>)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">## Use this function to get the current values of the five redundant parameters of the PR2 robot in free-base mode.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6234c468f2e58000d3359828f267dd14">  687</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6234c468f2e58000d3359828f267dd14">redundant_parameters</a>(self):</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="stringliteral">        @return A numpy vector of 5 elements containing the redundant parameters phi according to the parametrization specified in &lt;provide link&gt;</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="stringliteral">        phi[0] = The first arm joint angle (Shoulder Pan joint)</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="stringliteral">        phi[1] = The &quot;</span><span class="stringliteral">r&quot; coordinate of the relative wrist position(in cylinderical coordinates) phi[1]^2 = px^2 + py^2</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="stringliteral">        phi[2] = The </span><span class="stringliteral">&quot;z&quot;</span> coordinate of the relative wrist position(<span class="keywordflow">in</span> cylinderical coordinates) phi[2]   = pz</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        phi[3] = The <span class="stringliteral">&quot;psi&quot;</span> coordinate of the relative wrist position(<span class="keywordflow">in</span> cylinderical coordinates) phi[3] = arctan(x/y)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        phi[4] = The rotation of the base. Same <span class="keyword">as</span> <span class="stringliteral">&quot;tau&quot;</span> <span class="keywordflow">or</span> the 10th joint angle (phi[4] = q[10] = tau)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="stringliteral">        if self.larm_reference:</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="stringliteral">            arm = self.larm</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral">            arm = self.rarm</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="stringliteral">        if not self.redundant_parameters_updated:</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="stringliteral">            p = arm.wrist_position()</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">            r2 = p[0]**2 + p[1]**2</span></div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaf40c223796354fb6b79c9ed047c513a">  705</a></span>&#160;<span class="stringliteral">            self.phi = numpy.zeros(5)</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">            self.phi[0] = arm.config.q[0]</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral">            self.phi[1] = math.sqrt(r2)</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral">            self.phi[2] = p[2] </span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">            self.phi[3] = math.atan2(p[0],p[1]) </span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="stringliteral">            self.phi[4] = self.q[10]</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="stringliteral">            self.redundant_parameters_updated = True</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="stringliteral">        return copy.copy(self.phi)    </span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#afa3fc34205bba4ba2d69411cea65224e">  714</a></span>&#160;<span class="stringliteral">    def div_phi_err(self):</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        Returns the divergence of the vector of kinematic constraints <span class="stringliteral">&quot;e&quot;</span> <span class="keywordflow">in</span> respect with the redundant parameters <span class="stringliteral">&quot;phi&quot;</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        It <span class="keywordflow">is</span> a 9*5 matrix</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        f_ij = rond e_i / rond phi_j  (<span class="keywordflow">for</span> i = 0,..,8 &amp; j = 0,..,4) </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        the value of <span class="stringliteral">&quot;self.F&quot;</span> <span class="keywordflow">is</span> computed <span class="keywordflow">in</span> function <span class="stringliteral">&quot;div_theta_e&quot;</span> to avoid repeated calculations</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="stringliteral">        if not self.div_theta_err_updated:    </span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="stringliteral">            self.div_theta_err()</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="stringliteral">        return copy.copy(self.F)</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab2346c5f13a39bc8035c0c7badc90746">  725</a></span>&#160;<span class="stringliteral">    def redundancy_jacobian(self):</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        Returns the redundancy jacobian</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        Redundancy Jacobian <span class="keywordflow">is</span> the partial derivative of the joints <span class="keywordflow">in</span> respect with redundant parameters</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        RJ <span class="keywordflow">is</span> a 9*5 matrix because the first <span class="keywordflow">and</span> the last joints (q[0] <span class="keywordflow">and</span> q[10]) are themselves selected <span class="keyword">as</span> the redundant parameters</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="stringliteral">        if self.larm_reference:</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="stringliteral">            arm = self.larm</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="stringliteral">            arm = self.rarm</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="stringliteral">        if not self.redun_jacob_updated:</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="stringliteral">            d42 = arm.d2*arm.d4</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="stringliteral">            [s0, s1, s2, s3, s4, s5, s6] = arm.config.s</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="stringliteral">            [c0, c1, c2, c3, c4, c5, c6] = arm.config.c</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="stringliteral">            s321 = s3*s2*s1</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="stringliteral">            c65  = c6*c5</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral">            s65  = s6*s5</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral">            p = self.endeffector_position()</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="stringliteral">            r2 = p[0]**2 + p[1]**2</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="stringliteral">            p1 = math.sqrt(r2)</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="stringliteral">            p2 = arm.xd[2]</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="stringliteral">            C4 = math.cos(self.q[10])</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="stringliteral">            S4 = math.sin(self.q[10])</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="stringliteral">            RJ = numpy.zeros((9,5))        </span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="stringliteral">            E = self.div_theta_err()</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="stringliteral">            F = self.div_phi_err()</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="stringliteral">            RJ[2,0] =  F[0,0]/(2*d42*s3)</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="stringliteral">            RJ[2,1] =  F[0,1]/(2*d42*s3)</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="stringliteral">            RJ[2,2] =  -p2/(d42*s3)</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="stringliteral">            RJ[2,3] =  F[0,3]/(2*d42*s3)</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="stringliteral">            RJ[8,1] =  -F[8,1]</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="stringliteral">            RJ[8,3] =  -F[8,3]</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="stringliteral">            RJ[8,4] =  -F[8,4]</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="stringliteral">            RJ[6,2] =  - 1.0</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="stringliteral">            RJ[ 7 , 1 ] =  -F[7,1]</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="stringliteral">            RJ[ 7 , 3 ] =  -F[7,3]</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="stringliteral">            RJ[ 7 , 4 ] =  -F[7,4]</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="stringliteral">            &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            RJ[7,0] =  -RJ[8,0]*E[7,8]/E[7,7]</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            RJ[7,1] =  (2*p1 - RJ[8,1]*E[7,8])/E[7,7]</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            RJ[7,2] =  -RJ[8,2]*E[7,8]/E[7,7]</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            RJ[7,3] =  -RJ[8,3]*E[7,8]/E[7,7]</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            RJ[7,4] =  -(F[7,4] + RJ[8,4]*E[7,8])/E[7,7]</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="stringliteral">            RJ[1,0] =  -RJ[2,0]*E[1,2]/E[1,1]</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="stringliteral">            RJ[1,1] =  -(F[1,1] + RJ[2,1]*E[1,2])/E[1,1]</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="stringliteral">            RJ[1,2] =  -(F[1,2] + RJ[2,2]*E[1,2])/E[1,1]</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="stringliteral">            RJ[1,3] =  -RJ[2,3]*E[1,2]/E[1,1]</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="stringliteral">            RJ[1,4] =  -RJ[2,4]*E[1,2]/E[1,1]</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="stringliteral">            RJ[0,0] =  -(RJ[6,0] + RJ[2,0]*E[2,2] + RJ[1,0]*arm.d4*s321)/E[2,0]</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="stringliteral">            RJ[0,1] =  -(RJ[6,1] + RJ[2,1]*E[2,2] + RJ[1,1]*arm.d4*s321)/E[2,0]</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="stringliteral">            RJ[0,2] =  -(RJ[6,2] + RJ[2,2]*E[2,2] + RJ[1,2]*arm.d4*s321)/E[2,0]</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="stringliteral">            RJ[0,3] =  -(RJ[6,3] + RJ[2,3]*E[2,2] + RJ[1,3]*arm.d4*s321)/E[2,0]</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="stringliteral">            RJ[0,4] =  -(RJ[6,4] + RJ[2,4]*E[2,2] + RJ[1,4]*arm.d4*s321)/E[2,0]</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="stringliteral">            RJ[4,0] =  (F[3,0] + RJ[0,0]*E[3,0] + RJ[1,0]*E[3,1] + RJ[2,0]*E[3,2])/s5</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="stringliteral">            RJ[4,1] =  (RJ[0,1]*E[3,0] + RJ[1,1]*E[3,1] + RJ[2,1]*E[3,2])/s5</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="stringliteral">            RJ[4,2] =  (RJ[0,2]*E[3,0] + RJ[1,2]*E[3,1] + RJ[2,2]*E[3,2])/s5</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="stringliteral">            RJ[4,3] =  (RJ[0,3]*E[3,0] + RJ[1,3]*E[3,1] + RJ[2,3]*E[3,2])/s5</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="stringliteral">            RJ[4,4] =  (- F[3,0] + RJ[0,4]*E[3,0] + RJ[1,4]*E[3,1] + RJ[2,4]*E[3,2])/s5</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="stringliteral">            RJ[3,0] =  -(F[4,0] + RJ[0,0]*E[4,0] + RJ[1,0]*E[4,1] + RJ[4,0]*c5*s4)/(c4*s5)</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="stringliteral">            RJ[3,1] =  -(RJ[0,1]*E[4,0] + RJ[1,1]*E[4,1] + RJ[4,1]*c5*s4)/(c4*s5)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="stringliteral">            RJ[3,2] =  -(RJ[0,2]*E[4,0] + RJ[1,2]*E[4,1] + RJ[4,2]*c5*s4)/(c4*s5)</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="stringliteral">            RJ[3,3] =  -(RJ[0,3]*E[4,0] + RJ[1,3]*E[4,1] + RJ[4,3]*c5*s4)/(c4*s5)</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="stringliteral">            RJ[3,4] =  -(F[4,4] + RJ[0,4]*E[4,0] + RJ[1,4]*E[4,1] + RJ[4,4]*c5*s4)/(c4*s5)</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="stringliteral">            RJ[5,0] =  (F[5,0] + RJ[0,0]*E[5,0] + RJ[1,0]*E[5,1] + RJ[2,0]*E[5,2] + RJ[4,0]*c65)/s65</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="stringliteral">            RJ[5,1] =  (RJ[0,1]*E[5,0] + RJ[1,1]*E[5,1] + RJ[2,1]*E[5,2] + RJ[4,1]*c65)/s65</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="stringliteral">            RJ[5,2] =  (RJ[0,2]*E[5,0] + RJ[1,2]*E[5,1] + RJ[2,2]*E[5,2] + RJ[4,2]*c65)/s65</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="stringliteral">            RJ[5,3] =  (RJ[0,3]*E[5,0] + RJ[1,3]*E[5,1] + RJ[2,3]*E[5,2] + RJ[4,3]*c65)/s65</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="stringliteral">            RJ[5,4] =  (- F[5,0] + RJ[0,4]*E[5,0] + RJ[1,4]*E[5,1] + RJ[2,4]*E[5,2] + RJ[4,4]*c65)/s65</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3f7d2cab9695dad417544d44f6fb6675">  815</a></span>&#160;<span class="stringliteral">            self.RJ = RJ    </span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="stringliteral">            self.redun_jacob_updated = True</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="stringliteral">        return copy.copy(self.RJ)</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#acdcc6c681a31cf62c42aa37565d12971">  819</a></span>&#160;<span class="stringliteral">    def redundancy_jacobian_extended(self):</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        returns the extended redundancy jacobian which <span class="keywordflow">is</span> <span class="stringliteral">&quot;11 x 5&quot;</span> matrix.</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        It <span class="keywordflow">is</span> the redundancy jacobian with two rows inserted At its first <span class="keywordflow">and</span> last rows. </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        These rows are corresponding to the first <span class="keywordflow">and</span> last joints (shoulder pan joint <span class="keywordflow">and</span> base rotation angle).</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;    </span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">        if not self.redun_jacob_ext_updated:</span></div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a81246839b443d6fc93a0d425c4e9e30a">  826</a></span>&#160;<span class="stringliteral">            self.ERJ = numpy.zeros((11,5))</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="stringliteral">            RJ  = self.redundancy_jacobian()</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="stringliteral">            for i in range(9):</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral">                self.ERJ[i+1,:] = RJ[i,:]</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">            self.ERJ[0,0]  = 1.0</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">            self.ERJ[10,4] = 1.0</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="stringliteral">            self.redun_jacob_ext_updated = True</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="stringliteral">        return copy.copy(self.ERJ)</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a26835ea3f3cf036d4a2db7d1caed9e08">  835</a></span>&#160;<span class="stringliteral">    def div_theta_ofun(self):</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        Returns the divergence of the objective function <span class="keywordflow">in</span> respect with the joint angles</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        argument <span class="stringliteral">&quot;ofun&quot;</span> specifies the code of the objective function which <span class="keywordflow">is</span> set to 0 by default </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;        </span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="stringliteral">        if not self.div_theta_ofun_updated:</span></div>
<div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adbd777b0507a047faf02029bcb964dab">  841</a></span>&#160;<span class="stringliteral">            self.DTG = numpy.zeros(11)</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="stringliteral">            for i in range(11):</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="stringliteral">                self.DTG[i] = 2*self.W[i]*(self.q[i] - self.qm[i])    </span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="stringliteral">            self.div_theta_ofun_updated = True</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="stringliteral">        return copy.copy(self.DTG)    </span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab2f798d0e27c009a064b7e7ef8b07524">  847</a></span>&#160;<span class="stringliteral">    def div_phi_ofun(self):</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        Returns the divergence of the objective function <span class="keywordflow">in</span> respect with the redundant parameters <span class="stringliteral">&quot;phi&quot;</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        argument <span class="stringliteral">&quot;ofun&quot;</span> specifies the code of the objective function which <span class="keywordflow">is</span> set to 0 by default. </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        The code legend <span class="keywordflow">is</span> like function <span class="stringliteral">&quot;div_theta_ofun&quot;</span> </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="stringliteral">        if not self.div_phi_ofun_updated:</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="stringliteral">            J = self.redundancy_jacobian_extended()</span></div>
<div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac28e4fc8507751fd41cc0e5ba1e2ddd5">  855</a></span>&#160;<span class="stringliteral">            self.DFG = numpy.dot(J.T, self.div_theta_ofun())</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="stringliteral">            self.div_phi_ofun_updated = True</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="stringliteral">        return copy.copy(self.DFG)</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a061a675f0491758562181048dca901b3">  859</a></span>&#160;<span class="stringliteral">    def joint_stepsize_interval(self, direction):</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        Returns an interval <span class="keywordflow">for</span> the step size by which the joints are allowed to move <span class="keywordflow">in</span> the given <span class="stringliteral">&quot;direction&quot;</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="stringliteral">&quot;direction&quot;</span> <span class="keywordflow">is</span> a <span class="stringliteral">&quot;n X 1&quot;</span> vector <span class="keywordflow">and</span> specifies the direction of motion <span class="keywordflow">in</span> the jointspace. </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">        stepsize_interval = interval([-inf, inf])</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral">        for i in range(11):  #  for each joint</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral">            if self.W[i] != 0: # if the joint is limited</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="stringliteral">                joint_correction_interval = interval([self.ql[i], self.qh[i]]) - interval(self.q[i])  # find the interval for joint correction </span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">            else:</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">                joint_correction_interval = interval([-inf, inf])</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="stringliteral">            stepsize_interval = stepsize_interval &amp; joint_correction_interval/direction[i]</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="stringliteral">            &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;direction :                         = &quot;</span>, direction[i]</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;stepsize_interval:                  = &quot;</span>, stepsize_interval</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">print</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="stringliteral">        return stepsize_interval</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="stringliteral">                </span></div>
<div class="line"><a name="l00882"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac4210dca6ba6af8ae93bd75534534ae8">  882</a></span>&#160;<span class="stringliteral">    def optimum_joint_stepsize(self, direction, safety_factor = 0.99):</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        returns the optimum feasible step size that minimizes the objective function </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">if</span> the joints are constrained to move <span class="keywordflow">in</span> the given <span class="stringliteral">&quot;direction&quot;</span>.</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        The <span class="stringliteral">&quot;safety_factor&quot;</span> specifies how much we can approach to the borders of joint limits</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="stringliteral">        if not self.larm_reference:</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="stringliteral">            qc = self.q[0:11]</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="stringliteral">            qm = self.qm[0:11]</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="stringliteral">            qc = numpy.append(self.q[11:18] , self.q[7:11])</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="stringliteral">            qm = numpy.append(self.qm[11:18], self.qm[7:11])</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="stringliteral">        den = numpy.dot(direction.T, self.W * direction)</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="stringliteral">        num = numpy.dot(direction.T, self.W * (qc - qm))</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="stringliteral">        if not gen.equal(num, 0.0):</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="stringliteral">            eta = - num/den</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="stringliteral">            print &quot;Error from PR2.optim_joint_stepsize(): Moving in the given direction does not influence the objective function&quot;</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="stringliteral">            return None</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="stringliteral">        interval_eta   = self.joint_stepsize_interval(direction)</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="stringliteral">        (eta_l, eta_h) = interval_eta[0]</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="stringliteral">        if eta &lt; eta_l:</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="stringliteral">            return safety_factor*eta_l</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="stringliteral">        elif eta &lt; eta_h:</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="stringliteral">            return eta</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="stringliteral">            return safety_factor*eta_h</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad548ca1be61071bae3eee6119a1debac">  916</a></span>&#160;<span class="stringliteral">    def steepest_descent_redundancy_correction(self):</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        Finds the steepest descent direction of the objective function <span class="keywordflow">for</span> redundancy vector <span class="stringliteral">&quot;phi&quot;</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="stringliteral">        steepest_descent_redundancy_direction = - self.div_phi_ofun()</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="stringliteral">        steepest_descent_joint_direction      = numpy.dot(self.redundancy_jacobian_extended(), steepest_descent_redundancy_direction)</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="stringliteral">        eta = self.optimum_joint_stepsize(steepest_descent_joint_direction)</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="stringliteral">        return eta*steepest_descent_redundancy_direction</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#afff6c05d52773dcc82756189209b0f15">  929</a></span>&#160;<span class="stringliteral">    def endeffector_in_target(self):</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        Returns true <span class="keywordflow">is</span> endeffector <span class="keywordflow">is</span> <span class="keywordflow">in</span> target</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="stringliteral">        if not self.in_target_evaluated:</span></div>
<div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8519596a00430d86a6a087ca2e053e96">  934</a></span>&#160;<span class="stringliteral">            self.in_target = vecmat.equal(self.xd, self.endeffector_position()) and vecmat.equal(self.Rd, self.endeffector_orientation())</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="stringliteral">            self.in_target_evaluated = True</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="stringliteral">        return self.in_target</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3fd2137e85fa9c0842c737ab95c053d4">  939</a></span>&#160;<span class="stringliteral">    def optimize_config(self, silent = True):</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        Assuming the endeffector <span class="keywordflow">is</span> <span class="keywordflow">in</span> target,</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        this function changes the robot configuration without changing the endeffector pose</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        until the minimum possible value of objective function <span class="keywordflow">is</span> achieved</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        Note:</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        This function <span class="keywordflow">is</span> a procedure <span class="keywordflow">and</span> does <span class="keywordflow">not</span> <span class="keywordflow">return</span> any thing. Running this function, changes the robot configuration. </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        If the current tip pose <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> target, this function fails with an error</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;    </span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="stringliteral">        if (self.xd == None) or (self.Rd == None):</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="stringliteral">            self.set_target(self.endeffector_position(), self.endeffector_orientation())</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="stringliteral">        assert self.endeffector_in_target(), &quot;optimize_config Error: Endeffector is not in target pose&quot;</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="stringliteral">        ofun_old = self.objective_function()</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="stringliteral">        k        = 1.0</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="stringliteral">        while k &gt; 0.001:</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="stringliteral">            phi = self.redundant_parameters()</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="stringliteral">            # Find the steepest descent correction for redundancy:    </span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="stringliteral">            delta_phi = self.steepest_descent_redundancy_correction() </span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="stringliteral">            # Correct the redundancy</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="stringliteral">            phi = phi + k*delta_phi</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="stringliteral">            # Run IK to find the joints with the corrected redundancy:</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="stringliteral">            solution = self.IK_config(phi)</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="stringliteral">            if solution == None:</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="stringliteral">                fail = True</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="stringliteral">            else:</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="stringliteral">                # Solution exists: Compute the value of the objective function for the new configuration</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="stringliteral">                ofun_new = self.objective_function_for(solution)</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="stringliteral">                pygen.show(&quot;Objective Function Value: &quot;, ofun_new, silent)</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="stringliteral">                if ofun_new &gt; ofun_old - gen.epsilon:</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="stringliteral">                    fail = True</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="stringliteral">                else:</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="stringliteral">                    # Objective Function Reduced: Try to set the solution config</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="stringliteral">                    qd          = numpy.copy(self.q)</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="stringliteral">                    qd[0:11]    = solution</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="stringliteral">                    if not self.set_config(qd):</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="stringliteral">                        fail = True</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="stringliteral">                    else:</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="stringliteral">                        # Solution is feasible :-)</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="stringliteral">                        fail = False</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="stringliteral">            </span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="stringliteral">            if fail:</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="stringliteral">                k = k/2</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="stringliteral">            else:</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="stringliteral">                k = 1.0   </span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0e6fe699b7acc6ec4644ea57ff576646">  988</a></span>&#160;<span class="stringliteral">    def extended_config(self, q):</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="stringliteral">        qq = numpy.copy(self.q)</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="stringliteral">        if not self.larm_reference:</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="stringliteral">            qq[0:11]  = q</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="stringliteral">            qq[7:11 ] = q[7:11]</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="stringliteral">            qq[11:18] = q[0:7]</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="stringliteral">        return qq</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4cb1aca47abf7f914e93027977a45c03">  997</a></span>&#160;<span class="stringliteral">    def inverse_update(self):</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        Finds the inverse kinematic solution closest to the current configuration</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        The new joint angles will be set <span class="keywordflow">if</span> all the kinematic equations are satisfied. </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        All kinematic parameters will be updated.</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        THIS FUNCTION IS NOT COMPLETE AND i NEED TO WORK ON IT MORE ...</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="stringliteral">        if not self.larm_reference:</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="stringliteral">            arm    = self.rarm</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="stringliteral">            p_EF_W = self.p_EFR_WR</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="stringliteral">            p_B_BO = self.p_BR_BO</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="stringliteral">            arm    = self.larm</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="stringliteral">            p_EF_W = self.p_EFL_WL</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="stringliteral">            p_B_BO = self.p_BL_BO</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="stringliteral">            </span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="stringliteral">        if self.control_mode == &quot;fixed_base&quot;:</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="stringliteral">            arm_ori_target = numpy.dot(self.R_B.T, self.Rd)</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="stringliteral">            arm_pos_target = numpy.dot(self.R_B.T, self.xd - self.p_BO - numpy.dot(self.Rd, p_EF_W)) - p_B_BO</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="stringliteral">            arm.set_target(arm_pos_target, arm_ori_target)</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="stringliteral">            if not arm.inverse_update(optimize = True):</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="stringliteral">                print &quot;Error from inverse_update: No soluton for the arm in fixed mode&quot;</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="stringliteral">                return False</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="stringliteral">            else:</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="stringliteral">                if not self.larm_reference:</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="stringliteral">                    self.q[0:7] = arm.config.q</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="stringliteral">                else:</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="stringliteral">                    self.q[11:18] = arm.config.q</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="stringliteral">                self.set_config(self.q)</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="stringliteral">                return True            </span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="stringliteral">        elif self.control_mode == &quot;free_base&quot;:</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="stringliteral">            print &quot;Error from PR2().inverse_update: Free-Base mode is not supported yet.&quot;</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="stringliteral">            return False</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="stringliteral">        else:            </span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="stringliteral">            print &quot;Error from PR2().inverse_update: Unknown control mode&quot;</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="stringliteral">            return False</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a03e162a47fbcc82e4f06ed5ced6028e0"> 1036</a></span>&#160;<span class="stringliteral">    def project_to_js(self,  pos_traj, ori_traj = None, phi_start = 0.0, phi_end = None, delta_phi = 0.1, relative = True):</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        projects the given taskspace pose trajectory into the jointspace </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        The phase starts <span class="keyword">from</span> phi_start <span class="keywordflow">and</span> added by delta_phi <span class="keywordflow">in</span> each step.</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        at any time, <span class="keywordflow">if</span> a solution <span class="keywordflow">is</span> <span class="keywordflow">not</span> found, the process stops</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="stringliteral">        if phi_end == None:</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="stringliteral">            phi_end = pos_traj.phi_end</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="stringliteral">        if phi_end &gt; pos_traj.phi_end:</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="stringliteral">            phi_end = pos_traj.phi_end</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="stringliteral">        if ori_traj == None:</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="stringliteral">            ori_traj = trajlib.Orientation_Trajectory()</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="stringliteral">            ori_traj.current_orientation = self.endeffector_orientation()</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="stringliteral">        jt          = trajlib.Polynomial_Trajectory(dimension = 18)</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="stringliteral">        jt.capacity = 5</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="stringliteral">        jt.add_point(phi = 0.0, pos = numpy.copy(self.q), vel = numpy.zeros(18))</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="stringliteral">        phi   = phi_start</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="stringliteral">        pos_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="stringliteral">        ori_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="stringliteral">        if relative:</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="stringliteral">            p0    = self.endeffector_position() - pos_traj.current_position</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="stringliteral">            R0    = numpy.dot(self.endeffector_orientation(), ori_traj.current_orientation.T)  </span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="stringliteral">        else:</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="stringliteral">            p0    = numpy.zeros(3)</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="stringliteral">            R0    = numpy.eye(3)  </span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="stringliteral">        phi       = phi + delta_phi</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="stringliteral">        stay      = True</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="stringliteral">        while (phi &lt;= phi_end) and stay:</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="stringliteral">            if phi == phi_end:</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="stringliteral">                stay = False</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="stringliteral">            pos_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="stringliteral">            ori_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="stringliteral">            p = p0 + pos_traj.current_position</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="stringliteral">            R = numpy.dot(R0, ori_traj.current_orientation)</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="stringliteral">            self.set_target(p, R)</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="stringliteral">            if self.inverse_update():</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="stringliteral">                jt.add_point(phi = phi - phi_start, pos = numpy.copy(self.q))</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="stringliteral">                phi = phi + delta_phi</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="stringliteral">                if phi &gt; phi_end:</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="stringliteral">                    phi = phi_end</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="stringliteral">            else:</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="stringliteral">                stay = False</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="stringliteral">        jt.interpolate()</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="stringliteral">        return jt</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3501077191248ca1a69404d2471b7073"> 1089</a></span>&#160;<span class="stringliteral">    def project_to_ts(self,  js_traj, phi_start = 0.0, phi_end = None, delta_phi = 0.1):</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        projects the given jointspace trajectory into the taskspace</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        The phase starts <span class="keyword">from</span> phi_start <span class="keywordflow">and</span> added by delta_phi <span class="keywordflow">in</span> each step.</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> at any time the joint values are <span class="keywordflow">not</span> feasible, the process <span class="keywordflow">is</span> stopped.</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="stringliteral">        if phi_end == None:</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="stringliteral">            phi_end = js_traj.phi_end</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="stringliteral">        ori_traj = trajlib.Orientation_Trajectory_Segment()</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="stringliteral">        ori_traj.capacity = 200</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="stringliteral">        pos_traj = trajlib.Polynomial_Trajectory()</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="stringliteral">        if phi_end &gt; js_traj.phi_end:</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="stringliteral">            phi_end = js_traj.phi_end</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="stringliteral">        phi = phi_start</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="stringliteral">        js_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="stringliteral">        while (phi &lt; phi_end) and (self.set_config(js_traj.current_position)):</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="stringliteral">            pos_traj.add_point(phi - phi_start, self.endeffector_position())</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="stringliteral">            print self.endeffector_position()</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="stringliteral">            ori_traj.add_point(phi - phi_start, self.endeffector_orientation())</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="stringliteral">            phi = phi + delta_phi</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="stringliteral">            if phi &gt; phi_end:</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="stringliteral">                phi = phi_end</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="stringliteral">            js_traj.set_phi(phi)</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="stringliteral">            </span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="stringliteral">        pos_traj.add_point(phi - phi_start, self.endeffector_position())</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="stringliteral">        ori_traj.add_point(phi - phi_start, self.endeffector_orientation())</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="stringliteral">        return (pos_traj, ori_traj)</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="stringliteral"></span></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a9191c6a20edefdc45e81e3e8739dbdf9"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9191c6a20edefdc45e81e3e8739dbdf9">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.d7</a></div><div class="ttdeci">d7</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00112">pr2_kinematics.py:112</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a71a47f50021e36e8dde0aed7194afbd6"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a71a47f50021e36e8dde0aed7194afbd6">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.in_target_evaluated</a></div><div class="ttdeci">in_target_evaluated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00233">pr2_kinematics.py:233</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ad12af75571dfe9147970898e7d9f14a7"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad12af75571dfe9147970898e7d9f14a7">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.redun_jacob_ext_updated</a></div><div class="ttdeci">redun_jacob_ext_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00226">pr2_kinematics.py:226</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a669b7e80bd402c331bd8e8bbd362915b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a669b7e80bd402c331bd8e8bbd362915b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.div_theta_ofun_updated</a></div><div class="ttdeci">div_theta_ofun_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00182">pr2_kinematics.py:182</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ad53aeb78abc83a52ab8982f5c82a3d5b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad53aeb78abc83a52ab8982f5c82a3d5b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.S</a></div><div class="ttdeci">S</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00210">pr2_kinematics.py:210</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a96f17daad7ed7b8af164d2f7c6e1c5e5"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a96f17daad7ed7b8af164d2f7c6e1c5e5">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.redun_jacob_updated</a></div><div class="ttdeci">redun_jacob_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00225">pr2_kinematics.py:225</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ab32efb5ee5db14194313d4477efe4ce8"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab32efb5ee5db14194313d4477efe4ce8">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.Rd</a></div><div class="ttdeci">Rd</div><div class="ttdoc">A  rotation matrix specifying the desired endeffector orientation for the IK problem. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00133">pr2_kinematics.py:133</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a1b5db87f13780dbde7f33c14088c9e20"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1b5db87f13780dbde7f33c14088c9e20">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.rarm_endeff_orientation_updated</a></div><div class="ttdeci">rarm_endeff_orientation_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00222">pr2_kinematics.py:222</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a9524ba54025f718366f4399ce24c65ee"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9524ba54025f718366f4399ce24c65ee">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.objective_function_for</a></div><div class="ttdeci">def objective_function_for</div><div class="ttdoc">Use this function to get the value of the objective function for a given configuration q Why has this...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00389">pr2_kinematics.py:389</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a402ed898f0c84dca5c3b52359e6f8f86"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a402ed898f0c84dca5c3b52359e6f8f86">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_larm_grip</a></div><div class="ttdeci">def pos_larm_grip</div><div class="ttdoc">Use this function to get the current global position of the left gripper (Arm Endeffector). </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00487">pr2_kinematics.py:487</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a1fd406685cbdee605d0a7bebed56fdb0"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a1fd406685cbdee605d0a7bebed56fdb0">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.F</a></div><div class="ttdeci">F</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00571">pr2_kinematics.py:571</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a6a50d4dd5e00a69fa19507378c6d28db"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6a50d4dd5e00a69fa19507378c6d28db">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.R_WL</a></div><div class="ttdeci">R_WL</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00511">pr2_kinematics.py:511</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ac775ee34451fdfa742b318538164070e"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac775ee34451fdfa742b318538164070e">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdoc">The Class Constructor: </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00060">pr2_kinematics.py:60</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ab7a55b6649623b936cd7bfce1a71f640"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab7a55b6649623b936cd7bfce1a71f640">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm_reference</a></div><div class="ttdeci">larm_reference</div><div class="ttdoc">A boolean specifying the reference arm for the endeffector. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00125">pr2_kinematics.py:125</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a5e9d9349f1b00b8cd62ead275e5f100d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a5e9d9349f1b00b8cd62ead275e5f100d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_rarm_grip_wrt_tor</a></div><div class="ttdeci">def pos_rarm_grip_wrt_tor</div><div class="ttdoc">Use this function to get the current position of the right gripper (Arm Endeffector) w...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00472">pr2_kinematics.py:472</a></div></div>
<div class="ttc" id="namespacepackages_1_1nima_1_1mathematics_1_1general_html"><div class="ttname"><a href="namespacepackages_1_1nima_1_1mathematics_1_1general.html">packages.nima.mathematics.general</a></div><div class="ttdef"><b>Definition:</b> <a href="mathematics_2general_8py_source.html#l00001">mathematics/general.py:1</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a25ef437222c2e255ed850383abc8c43f"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a25ef437222c2e255ed850383abc8c43f">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_BO</a></div><div class="ttdeci">p_BO</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00212">pr2_kinematics.py:212</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a6234c468f2e58000d3359828f267dd14"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6234c468f2e58000d3359828f267dd14">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.redundant_parameters</a></div><div class="ttdeci">def redundant_parameters</div><div class="ttdoc">Use this function to get the current values of the five redundant parameters of the PR2 robot in free...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00687">pr2_kinematics.py:687</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a716a81bb9304c0eabf0523d510a17d0d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a716a81bb9304c0eabf0523d510a17d0d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.rarm</a></div><div class="ttdeci">rarm</div><div class="ttdoc">An instance of class packages.nima.robotics.kinematics.special_geometries.pr2.pr2_arm_kinematics.PR2_ARM() containing the kinematic properties and methods of the right arm. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00106">pr2_kinematics.py:106</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a3a50c2ca9418cac811b2cca34087a40b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3a50c2ca9418cac811b2cca34087a40b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.IK_config</a></div><div class="ttdeci">def IK_config</div><div class="ttdoc">Finds the solution of the Inverse Kinematic problem for given redundant parameter vector  in free-bas...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00417">pr2_kinematics.py:417</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_aaa53ca0b650dfd85c4f59fa156f7a2cc"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaa53ca0b650dfd85c4f59fa156f7a2cc">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.C</a></div><div class="ttdeci">C</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00209">pr2_kinematics.py:209</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ab11c51b7742a144ec8f0089eb023613d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab11c51b7742a144ec8f0089eb023613d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.control_mode</a></div><div class="ttdeci">control_mode</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00121">pr2_kinematics.py:121</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a21ebb59ff6f547d967d436a97b671fb2"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a21ebb59ff6f547d967d436a97b671fb2">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.endeffector_position</a></div><div class="ttdeci">def endeffector_position</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00519">pr2_kinematics.py:519</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a9ca6e8e839c342f1460f6841434ec363"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ca6e8e839c342f1460f6841434ec363">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.redundant_parameters_updated</a></div><div class="ttdeci">redundant_parameters_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00232">pr2_kinematics.py:232</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_affe246b1b04676ed6498c559bcb007b2"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#affe246b1b04676ed6498c559bcb007b2">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.objective_function</a></div><div class="ttdeci">def objective_function</div><div class="ttdoc">Use this function to find the current value of the objective function. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00188">pr2_kinematics.py:188</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a767f4b64344fbbf1211e5f2f1dcf1474"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a767f4b64344fbbf1211e5f2f1dcf1474">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.R_B</a></div><div class="ttdeci">R_B</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00216">pr2_kinematics.py:216</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_aba032e34d43f0b23c919cbf68c403406"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aba032e34d43f0b23c919cbf68c403406">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.set_ofuncode</a></div><div class="ttdeci">def set_ofuncode</div><div class="ttdoc">protected </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00174">pr2_kinematics.py:174</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a56210030456683844085921f1f3ada2d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a56210030456683844085921f1f3ada2d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.all_joints_in_range</a></div><div class="ttdeci">def all_joints_in_range</div><div class="ttdoc">Use this function to check if all values of the given joint vector are in their feasibility range...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00161">pr2_kinematics.py:161</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a7f5ee081c64f5a7462b00b975145d274"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7f5ee081c64f5a7462b00b975145d274">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_BR_BO</a></div><div class="ttdeci">p_BR_BO</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00214">pr2_kinematics.py:214</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a63916366e296264cef4126b2935c8b0a"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a63916366e296264cef4126b2935c8b0a">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.rarm_endeffector_position</a></div><div class="ttdeci">def rarm_endeffector_position</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00491">pr2_kinematics.py:491</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a18a1fb96589c0d78f99c2d30b27aa3d3"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a18a1fb96589c0d78f99c2d30b27aa3d3">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.R_WL_B</a></div><div class="ttdeci">R_WL_B</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00543">pr2_kinematics.py:543</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a0055ff5d5ece1ab849f786c89dd56c3c"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0055ff5d5ece1ab849f786c89dd56c3c">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm_endeffector_orientation</a></div><div class="ttdeci">def larm_endeffector_orientation</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00537">pr2_kinematics.py:537</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_aa57b8491d1d8fc1014dd54bcf83b130a"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa57b8491d1d8fc1014dd54bcf83b130a">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.E</a></div><div class="ttdeci">E</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00570">pr2_kinematics.py:570</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ac5876550d025190ff30d976a7df240f3"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ac5876550d025190ff30d976a7df240f3">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.qm</a></div><div class="ttdeci">qm</div><div class="ttdoc">A numpy vector of size 18 containing a set of reference values for the joints. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00074">pr2_kinematics.py:74</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a83720e74bfd15e86965bbe5e43d4d62e"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a83720e74bfd15e86965bbe5e43d4d62e">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.joint_in_range</a></div><div class="ttdeci">def joint_in_range</div><div class="ttdoc">Use this function to check if a given value for specific joint is in its feasibility range...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00139">pr2_kinematics.py:139</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a034ddeb7c168564833a79c1a74518cee"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a034ddeb7c168564833a79c1a74518cee">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.qh</a></div><div class="ttdeci">qh</div><div class="ttdoc">A numpy vector of size 7 containing the upper bounds of the arm joints. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00067">pr2_kinematics.py:67</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a3bc992460b7cddce2ba254e7679b6d25"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3bc992460b7cddce2ba254e7679b6d25">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm</a></div><div class="ttdeci">larm</div><div class="ttdoc">An instance of class packages.nima.robotics.kinematics.special_geometries.pr2.pr2_arm_kinematics.PR2_ARM() containing the kinematic properties and methods of the left arm. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00110">pr2_kinematics.py:110</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a27ee7bd06926f177ef4e52611b2c793a"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a27ee7bd06926f177ef4e52611b2c793a">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.rarm_endeff_position_updated</a></div><div class="ttdeci">rarm_endeff_position_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00220">pr2_kinematics.py:220</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_aaff9d3488158f8fb0eb1e1e73c73e8c2"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aaff9d3488158f8fb0eb1e1e73c73e8c2">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.R_WR_B</a></div><div class="ttdeci">R_WR_B</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00531">pr2_kinematics.py:531</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a9ee70cf875c0b19cc72395a999dcc389"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9ee70cf875c0b19cc72395a999dcc389">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_EFL</a></div><div class="ttdeci">p_EFL</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00514">pr2_kinematics.py:514</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_adf0d43a30a4839673855579679982d4b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#adf0d43a30a4839673855579679982d4b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.l0</a></div><div class="ttdeci">l0</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00114">pr2_kinematics.py:114</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ab07aad3707ab81430a546fb66f5cf6a2"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab07aad3707ab81430a546fb66f5cf6a2">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.div_theta_err</a></div><div class="ttdeci">def div_theta_err</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00555">pr2_kinematics.py:555</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2</a></div><div class="ttdoc">Contains properties and methods managing the kinematics of the PR2 robot. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00050">pr2_kinematics.py:50</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a0a9b52fb6605edc74fd7d5359f34477e"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0a9b52fb6605edc74fd7d5359f34477e">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.W</a></div><div class="ttdeci">W</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00100">pr2_kinematics.py:100</a></div></div>
<div class="ttc" id="namespacepackages_1_1nima_1_1general_html"><div class="ttname"><a href="namespacepackages_1_1nima_1_1general.html">packages.nima.general</a></div><div class="ttdef"><b>Definition:</b> <a href="general_8py_source.html#l00001">general.py:1</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a81497b6134f7053a7a9e78daf399ff20"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a81497b6134f7053a7a9e78daf399ff20">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_larm_grip_wrt_tor_shpan</a></div><div class="ttdeci">def pos_larm_grip_wrt_tor_shpan</div><div class="ttdoc">Use this function to get the current position of the left gripper (Arm Endeffector) w...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00449">pr2_kinematics.py:449</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ae031f9dbc634ca3d2b12cc77e9469f3d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae031f9dbc634ca3d2b12cc77e9469f3d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.div_phi_ofun_updated</a></div><div class="ttdeci">div_phi_ofun_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00183">pr2_kinematics.py:183</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a86a6e93a196ee4ea762bb6c573cd6069"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86a6e93a196ee4ea762bb6c573cd6069">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.ql</a></div><div class="ttdeci">ql</div><div class="ttdoc">A numpy vector of size 7 containing the lower bounds of the arm joints. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00064">pr2_kinematics.py:64</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a0903a189cbe112bce4b75bbc7c50357c"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0903a189cbe112bce4b75bbc7c50357c">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.xd</a></div><div class="ttdeci">xd</div><div class="ttdoc">A numpy vector of size 3 representing the desired position of the Endeffector. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00129">pr2_kinematics.py:129</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a849538b68e3a761a68bb8e7d950ee0af"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a849538b68e3a761a68bb8e7d950ee0af">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm_endeffector_position</a></div><div class="ttdeci">def larm_endeffector_position</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00505">pr2_kinematics.py:505</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a6e5d1ccc5f119afc56ad526231f6ccf7"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a6e5d1ccc5f119afc56ad526231f6ccf7">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.endeffector_orientation</a></div><div class="ttdeci">def endeffector_orientation</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00549">pr2_kinematics.py:549</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a680f37ca8a46fccd77fde121859e3bb3"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a680f37ca8a46fccd77fde121859e3bb3">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_rarm_grip_wrt_tor_shpan</a></div><div class="ttdeci">def pos_rarm_grip_wrt_tor_shpan</div><div class="ttdoc">Use this function to get the current position of the right gripper (Arm Endeffector) w...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00439">pr2_kinematics.py:439</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_af6750e95dc16cc3bf51069422e8ef1dc"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#af6750e95dc16cc3bf51069422e8ef1dc">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.set_config</a></div><div class="ttdeci">def set_config</div><div class="ttdoc">Sets the robot configuration to the desired given joint values. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00198">pr2_kinematics.py:198</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a32304474a27c4fedb91eb6fd587b223b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a32304474a27c4fedb91eb6fd587b223b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm_endeff_orientation_updated</a></div><div class="ttdeci">larm_endeff_orientation_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00223">pr2_kinematics.py:223</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_aa825a3134f491c393b9dbccfc4bfad7d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#aa825a3134f491c393b9dbccfc4bfad7d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_BL_BO</a></div><div class="ttdeci">p_BL_BO</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00213">pr2_kinematics.py:213</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a3574231572d9cc0e22ab8749e1e209c9"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a3574231572d9cc0e22ab8749e1e209c9">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.ofun_computed</a></div><div class="ttdeci">ofun_computed</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00181">pr2_kinematics.py:181</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a0e41a0fa618f59d8b691a2b320fb304e"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a0e41a0fa618f59d8b691a2b320fb304e">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.ofun</a></div><div class="ttdeci">ofun</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00190">pr2_kinematics.py:190</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ae012e78b3bb050a10b5a615ea657d71b"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ae012e78b3bb050a10b5a615ea657d71b">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.geometric_jacob_updated</a></div><div class="ttdeci">geometric_jacob_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00227">pr2_kinematics.py:227</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a640cacaf0b3f68dc8d0b7338409c9e14"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a640cacaf0b3f68dc8d0b7338409c9e14">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_EFL_WL</a></div><div class="ttdeci">p_EFL_WL</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00116">pr2_kinematics.py:116</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a72978980acd54f9aaf100f758660a136"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a72978980acd54f9aaf100f758660a136">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.larm_endeff_position_updated</a></div><div class="ttdeci">larm_endeff_position_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00221">pr2_kinematics.py:221</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a4c6b3ffed5136a961ee8bb2ad398169d"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4c6b3ffed5136a961ee8bb2ad398169d">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_EFR_WR</a></div><div class="ttdeci">p_EFR_WR</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00115">pr2_kinematics.py:115</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a869ffe20032bd5888e012020051530b2"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a869ffe20032bd5888e012020051530b2">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_WR_BR</a></div><div class="ttdeci">p_WR_BR</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00498">pr2_kinematics.py:498</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a86324d3da2ccd46823b05cd5b5d9b4a9"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a86324d3da2ccd46823b05cd5b5d9b4a9">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_EFR</a></div><div class="ttdeci">p_EFR</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00500">pr2_kinematics.py:500</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a7038bdbba8f7357aa999358ac31578ee"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a7038bdbba8f7357aa999358ac31578ee">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.div_theta_err_updated</a></div><div class="ttdeci">div_theta_err_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00228">pr2_kinematics.py:228</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a31e23eae18e9bde6d59aa3298ebd3667"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a31e23eae18e9bde6d59aa3298ebd3667">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.all_IK_solutions</a></div><div class="ttdeci">def all_IK_solutions</div><div class="ttdoc">Finds all the feasible solutions of the Inverse Kinematic problem for given redundant parameter vecto...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00294">pr2_kinematics.py:294</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ab9adddbab17cda8cfa88101a8c47ad0c"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ab9adddbab17cda8cfa88101a8c47ad0c">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.set_target</a></div><div class="ttdeci">def set_target</div><div class="ttdoc">Sets the endeffector target to a desired position and orientation. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00248">pr2_kinematics.py:248</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a4d18f7b7fbdb15366c73a4313eb70bd3"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a4d18f7b7fbdb15366c73a4313eb70bd3">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_larm_grip_wrt_tor</a></div><div class="ttdeci">def pos_larm_grip_wrt_tor</div><div class="ttdoc">Use this function to get the current position of the left gripper (Arm Endeffector) w...</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00461">pr2_kinematics.py:461</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_abfe0b1d5a3feda84df5608586bfcca71"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#abfe0b1d5a3feda84df5608586bfcca71">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.p_WL_BL</a></div><div class="ttdeci">p_WL_BL</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00512">pr2_kinematics.py:512</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a8800f1a13b5842e83b288bfbf5565117"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8800f1a13b5842e83b288bfbf5565117">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.pos_rarm_grip</a></div><div class="ttdeci">def pos_rarm_grip</div><div class="ttdoc">Use this function to get the current global position of the right gripper (Arm Endeffector). </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00480">pr2_kinematics.py:480</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a2488b3fc0cf41eafdb84b8dfd6af5547"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a2488b3fc0cf41eafdb84b8dfd6af5547">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.b0</a></div><div class="ttdeci">b0</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00113">pr2_kinematics.py:113</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a8d1c5cde2d81ee4847adfebb03fdcaac"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a8d1c5cde2d81ee4847adfebb03fdcaac">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.R_WR</a></div><div class="ttdeci">R_WR</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00497">pr2_kinematics.py:497</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a9dc1d2649ed96dd542822850b5eadbec"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a9dc1d2649ed96dd542822850b5eadbec">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.ofuncode</a></div><div class="ttdeci">ofuncode</div><div class="ttdoc">Specifies the objective function for redundancy optimization. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00098">pr2_kinematics.py:98</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a11b97e21a0e373a7a382cc567e5abd48"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a11b97e21a0e373a7a382cc567e5abd48">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.in_target_updated</a></div><div class="ttdeci">in_target_updated</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00224">pr2_kinematics.py:224</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_ad616425e2729a60bb8a261879c736235"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#ad616425e2729a60bb8a261879c736235">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.rarm_endeffector_orientation</a></div><div class="ttdeci">def rarm_endeffector_orientation</div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00525">pr2_kinematics.py:525</a></div></div>
<div class="ttc" id="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2_html_a099b3b060154898840f0ebdfb46ec78f"><div class="ttname"><a href="classpackages_1_1nima_1_1robotics_1_1kinematics_1_1special__geometries_1_1pr2_1_1pr2__kinematics_1_1_p_r2.html#a099b3b060154898840f0ebdfb46ec78f">packages.nima.robotics.kinematics.special_geometries.pr2.pr2_kinematics.PR2.q</a></div><div class="ttdeci">q</div><div class="ttdoc">A numpy vector of size 18 containing the current values of the joints. </div><div class="ttdef"><b>Definition:</b> <a href="pr2__kinematics_8py_source.html#l00091">pr2_kinematics.py:91</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 4 2015 12:28:22 for MAGIKS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
